
@{
    ViewBag.Title = "项目列表";
}

<link rel="stylesheet" href="~/css/icheck/minimal/minimal.css" />
<link href="~/css/sweetalert2.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/style.css" />

<style>
   #statusstyle{
        color:#ea6307;
    }
   #wfb{
       color:dodgerblue;

   }
   #yjs{
       color:#808080;
   }
</style>
<div class="left-nav">
    <div class="left-nav-con">
        <h1>招标内容</h1>
        <ul class="left-nav-list">
            <li><a href="/Projects" class="active"><i class="icon icon-eye1"></i>内容列表</a></li>
        </ul>
    </div>
</div>
<div class="main-con">
    <div class="main-wrap">
        <div class="main-top">
            <a class="meet-btn blue-btn sm-btn" href="#">全部</a>
            <select class="meet-select js-meet-state">
                <option value="all">项目类型</option>
                <option value="1">已使用</option>
                <option value="2">被预定</option>
            </select>
            <select class="meet-select js-meet-state">
                <option value="all">项目状态 </option>
                <option value="1">已结束</option>
                <option value="2">审核中</option>
                <option value="2">未启动</option>
            </select>
            <div class="search-con2">
                <input type="text" name="keyname" placeholder="请输入关键字">
                <a class="search-btn"><i class="search-icon meet-icon"></i></a>
            </div>
            <a href="#" class="meet-btn orange-btn small-size sm-btn js-output-excle">
                <i class="xs-meet-icon icon-daoout"></i>导出
            </a>
            <a class="meet-btn red-btn small-size sm-btn" href="/Projects/Add">
                <i class="xs-meet-icon icon-add"></i>添加
            </a>

        </div>
        <div class="wc-container">
            <table class="meet-table text-left">
                <thead class="wc-header">
                    <tr>
                        <td class="check-color" style="width:20px;padding:0px 5px">
                            <span class="table-all-check">
                                <input type="checkbox"
                                       class="icheck"
                                       name="all-check"
                                       id="all-check" />
                            </span>
                        </td>
                        <td style="width:150px;padding:0px 5px">名称</td>
                        <td style="width:80px;padding:0px 5px">类型</td>
                        <td style="width:100px;padding:0px 5px">地点</td>
                        <td style="width:100px;padding:0px 5px">提交人</td>
                        <td  style="width:100px;padding:0px 5px">发布时间</td>
                        <td style="width:100px;padding:0px 5px">状态</td>
                    </tr>
                </thead>
                <tbody id="tbProjects">
                </tbody>
            </table>
            <div class="page">
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="~/js/jquery-1.11.0.js"></script>
<script type='text/javascript' src='~/js/jquery-ui.min.js'></script>
<script src="~/js/sweetalert2.all.js"></script>
<script type="text/javascript" src="~/js/validate/jquery.validate.min.js"></script>
<script type="text/javascript" src="~/js/validate/messages_zh.min.js"></script>
<script type="text/javascript" src="~/js/icheck/icheck.min.js"></script>
<script type='text/javascript' src='~/js/js.js'></script>
<script type='text/javascript'>
    //分页点击
    var cur_num = 1
    var clickpagenum = "" //所点击页码
    //当前所在页码
    var nowpage = 1;
    var page_size = 10
    var pagenum = 12
    Paginator(nowpage, page_size)



    function Paginator(page, ps) {
        $.ajax({
            url: "/Projects/GetAllProjects",
            datatype: 'json',
            type: "Post",
            data: "&PageIndex=" + page + "&PageSize=" + ps,
            success: function (data) {
                if (data != null) {
                    var jsonData = JSON.parse(data);
                    var obj = jsonData.List;
                    var htm = "";

                    for (var i = 0; i < obj.length; i++) {
                        var o = obj[i];
                        switch (o.status) {
                            case "未发布":
                                applyStyle = "wfb";
                                break;
                            case "招标文件审核中":
                                applyStyle = "statusstyle";
                                break;
                            case "招标文件审核通过":
                                applyStyle = "statusstyle";
                                break;
                            case "招标审核中":
                                applyStyle = "statusstyle";
                                break;
                            case "招标审核通过":
                                applyStyle = "statusstyle";
                                break;
                            case "定标文件审核中":
                                applyStyle = "statusstyle";
                                break;
                            case "已结束":
                                applyStyle = "yjs";
                                break;
                        }
                        htm += "<tr class='white-bg'  onclick=\"location.href='/Projects/Detail?pid="+o.id+"';\">" +
                    '<td class="check-color"><input class="icheck" name="id" type="checkbox" value="'+o.id+'" id="checkbox-1" /></td >' +
                    '<td>' + o.name + '</td>' +
                    '<td>' + o.projtype + '</td>' +
                    '<td>' + o.location + '</td>' +
                    '<td>' + o.publisher + '</td>' +
                    '<td>' + o.publishdate + '</td>' +
                    '<td id="' + applyStyle + '" >' + o.status + '</td>';
                    }
                    }
                $("#tbProjects").html(htm)
                console.log(page, jsonData.PageCount, jsonData.total, ps)
                pages(page, jsonData.PageCount, jsonData.total, ps)
                }
            })
        };
   
</script>
